<div id="mail" class="page-layout carded left-sidenav" layout="row" ng-switch="vm.settingsCategoryState" ng-controller="settingscontroller as vm">
    <!--<div class="page-load-cover" ng-if="!allGenLoaded" >-->
    <!--<md-progress-circular></md-progress-circular>-->
    <!--</div>-->
    <meta name="updatedBy" content="Kasun">
    <meta name="modifiedDate" content="07-11-2016">
    <meta name="version" content="6.0.0.8">
    <meta name="application" content="settings">
    <!-- TOP BACKGROUND -->
    <div class="top-bg md-accent-bg"></div>
    <!-- / TOP BACKGROUND -->

    <!-- CENTER -->
    <div class="center" layout="column" flex>

        <!-- CONTENT HEADER - H NAV -->
        <!--<div class="header" layout="row" layout-align="start start">-->

        <!--<div class="search-wrapper md-whiteframe-4dp" layout="row" layout-align="start center" flex>-->
        <!--<md-button class="md-icon-button sidenav-toggle" ng-click="vm.toggleSidenav('main-sidenav')" hide-gt-md-->
        <!--aria-label="Toggle Sidenav">-->
        <!--<md-icon class="icon" md-font-icon="icon-menu"></md-icon>-->
        <!--</md-button>-->

        <!--<div class="search" flex layout="row" layout-align="start center">-->
        <!--<md-icon md-font-icon="icon-magnify" class="icon s24"></md-icon>-->
        <!--<input flex ng-model="vm.search" type="text" placeholder="Search for a product">-->
        <!--</div>-->
        <!--</div>-->

        <!--</div>-->
        <!-- / CONTENT HEADER -->

        <!-- CONTENT HEADER- V NAV-->
        <div layout="column" layout-align="start start">
            <div class="v-header" layout="row" flex fill-width>
                <div class="title" layout="column" layout-align="center start">
                    <div class="logo" layout="row" layout-align="start center">
                        <span class="logo-icon">
                            <img src="app/core/app_icons/settings_app_icon.png" alt=""/>
                        </span>
                        <span class="logo-text">Settings</span>
                    </div>
                </div>
                <!--<div class="search-wrapper md-whiteframe-4dp" layout="row" layout-align="start center" flex>-->
                <!--&lt;!&ndash;<md-button class="md-icon-button sidenav-toggle" ng-click="vm.toggleSidenav('main-sidenav')" hide-gt-md&ndash;&gt;-->
                <!--&lt;!&ndash;aria-label="Toggle Sidenav">&ndash;&gt;-->
                <!--&lt;!&ndash;<md-icon class="icon" md-font-icon="icon-menu"></md-icon>&ndash;&gt;-->
                <!--&lt;!&ndash;</md-button>&ndash;&gt;-->

                <!--<div class="search" flex layout="row" layout-align="start center">-->
                <!--<md-icon md-font-icon="icon-magnify" class="icon s24"></md-icon>-->
                <!--<input flex ng-model="vm.search" type="text" placeholder="Search for a product">-->
                <!--</div>-->
                <!--</div>-->
            </div>
        </div>
        <!-- / CONTENT HEADER -->

        <!-- CONTENT CARD -->
        <div class="content-card" layout="column" flex>

            <md-tabs class="main-nav-tabs" id="settingsTabs" flex md-selected="mainNavSelected">
                <md-tab label="General" layout="column" layout-align="start start" ng-click="vm.settingsCategoryNavigation('default')">
                    <md-content flex>
                        <div class="preloader" ng-hide="allGenLoaded">
                            <md-progress-circular></md-progress-circular>
                        </div>
                        <form name="vm.generalForm" ng-submit="saveGeneral()" id="generalForm">
                            <md-card flex class="input-block-gen">
                                <md-card-title>
                                    <div layout="row" layout-align="start center">
                                        <md-icon md-font-icon="icon-cog"></md-icon> <h3>General Details</h3>
                                    </div>
                                </md-card-title>
                                <md-card-content>
                                    <div layout="row">
                                        <md-input-container flex="30">
                                            <label>Decimal Point</label>
                                            <input name="decimalPoint" type="number" min="0" max="8" decimal-point="" ng-pattern="/^-?[0-9][^\.]*$/" ng-model="general.decimalPoint">
                                            <div ng-messages="vm.generalForm.decimalPoint.$error">
                                                <div ng-message="pattern">Decimal Point is invalid</div>
                                                <div ng-message="max">Please enter a less value.</div>
                                            </div>
                                        </md-input-container>

                                        <div flex="5"></div>

                                        <md-autocomplete flex class="mt-20"
                                                         md-select-on-match
                                                         ng-keypress="enter($event)"
                                                         ng-disabled="vm.isDisabled"
                                                         md-input-name="autocompleteField"
                                                         md-no-cache="vm.noCache"
                                                         md-selected-item="vm.selectedItem"
                                                         md-selected-item-change="setBaseCurrency(item)"
                                                         md-search-text-change="setBaseCurrency(item)"
                                                         md-search-text="vm.searchText"
                                                         md-items="item in querySearch(vm.searchText)"
                                                         md-item-text="item.code"
                                                         md-floating-label="Base Currency"
                                                         md-min-length="">
                                            <md-item-template>
                                                <span md-highlight-text="vm.searchText" ng-mouseover="tooltip=true">{{item.code}} - {{item.name}}</span>
                                                <!--<md-tooltip md-direction="right" md-visible="tooltip">{{item.name}}</md-tooltip>-->
                                            </md-item-template>
                                        </md-autocomplete>

                                        <div flex="5">
                                            <!--Spacer -->
                                        </div>

                                        <div layout="row" layout-align="start center" flex="30" class="state-capsule">
                                            <div layout="row">
                                                <span>Current base currency</span>
                                                <span>{{UIbaseCurrency}}</span>
                                            </div>
                                        </div>
                                    </div>

                                </md-card-content>
                            </md-card>

                            <md-card flex class="input-block-gen">
                                <md-card-title>
                                    <div layout="row" layout-align="start center">
                                        <md-icon md-font-icon="icon-document"></md-icon> <h3>Document format</h3>
                                    </div>
                                </md-card-title>
                                <md-card-content md-whiteframe="1dp">
                                    <div>
                                        <div class="group-sub-head pos-rel">
                                            <b>Header</b>
                                            <md-icon md-font-icon="icon-information" class="fs-14 format-header-ico">
                                                <div id="format-header" class="doc-format-tooltip" md-whiteframe="4dp" layout="column">
                                                    <div layout="row" class="mb-10">
                                                        <div flex>
                                                            <div class="line"></div>
                                                            <div class="line"></div>
                                                            <div class="line"></div>
                                                        </div>
                                                        <div flex layout="row" class="highlight">
                                                            <div class="logo"></div>
                                                            <div flex>
                                                                <div class="line"></div>
                                                                <div class="line"></div>
                                                                <div class="line"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="line"></div>
                                                    <div class="line"></div>
                                                    <div class="line"></div>
                                                    <div class="line"></div>
                                                    <div class="line"></div>
                                                    <div class="line"></div>
                                                    <div class="line"></div>
                                                    <div class="line"></div>
                                                    <div layout="column" class="mt-10">
                                                        <div class="line w-10"></div>
                                                        <div class="line"></div>
                                                        <div class="line"></div>
                                                    </div>
                                                </div>
                                            </md-icon>
                                        </div>
                                        <div class="issuer gen-template" layout="row" layout-align="center center">
                                            <table>
                                                <tr>
                                                    <td class="pv-0 pr-20">
                                                        <div class="content-block-wrapper" flex>
                                                            <div layout="row" class="content-block">
                                                                <div flex>
                                                                    <div layout="column" layout-align="center center" class="product-img-cont">
                                                                        <!--ng-if="cropper.croppedImage==null"-->
                                                                        <div layout="column" layout-align="center center" class="img-up-invitation" ng-if="cropper.sourceImage==null">
                                                                            <md-icon md-font-icon="icon-image-filter"></md-icon>
                                                                            <span>Browse a Company Logo</span>
                                                                            <span class="img-size-msg">[Maximum size : 180px X 180px]</span>
                                                                        </div>
                                                                        <canvas flex height="242" width="200" id="canvas" image-cropper image="cropper.sourceImage" cropped-image="cropper.croppedImage" crop-width="180" crop-height="180" keep-aspect="true" touch-radius="30" crop-area-bounds="bounds"></canvas>

                                                                        <div class="input-partial">
                                                                            <md-button class="md-raised md-accent" ng-click="triggerImgInput($event)">Browse</md-button>
                                                                            <input type="file" id="productImageInput" img-cropper-fileread image="cropper.sourceImage" style="display:none" />
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div layout="row" layout-align="center center" class="b br-5">
                                                            <div>
                                                                <div flex layout="column" layout-align="center center" class="product-preview">
                                                                    <span>Company Logo preview</span>
                                                                    <div layout="column" layout-align="center center" class="b b-light" flex="80">
                                                                        <div layout="column" layout-align="center center" class="msg" ng-if="cropper.croppedImage==null">
                                                                            <md-icon md-font-icon="icon-information"></md-icon> No image is selected yet
                                                                        </div>
                                                                        <div ng-show="cropper.croppedImage!=null">
                                                                            <img ng-src="{{cropper.croppedImage}}" />
                                                                        </div>
                                                                    </div>
                                                                    <label ng-show="cropper.croppedImage!=null" class="img-size-msg" style="margin-left: 10px">[Image size : 180px X 180px]</label>
                                                                </div>
                                                            </div>
                                                            <div class="info p-20" flex>
                                                                <div class="title">
                                                                    <md-input-container class="md-block mb-0" flex>
                                                                        <label>Company Name</label>
                                                                        <input name="companyName" type="" ng-model="template.companyName" ng-maxlength="30">
                                                                        <div ng-messages="vm.generalForm.companyName.$error">
                                                                            <div ng-message="maxlength">Company Name has to be less than 30 characters long</div>
                                                                        </div>
                                                                    </md-input-container>
                                                                </div>
                                                                <div class="address" layout="row">
                                                                    <md-input-container class="md-block mb-0" flex>
                                                                        <label>Address</label>
                                                                        <input name="companyAddr" type="" ng-model="template.companyAddress" ng-maxlength="100">
                                                                        <div ng-messages="vm.generalForm.companyAddr.$error">
                                                                            <div ng-message="maxlength">Company Address has to be less than 100 characters long</div>
                                                                        </div>
                                                                    </md-input-container>
                                                                </div>
                                                                <div class="title">
                                                                    <md-input-container class="md-block mb-0" flex>
                                                                        <label>Phone</label>
                                                                        <input name="companyPhone" type="" ng-model="template.companyPhone" ng-maxlength="15">
                                                                        <div ng-messages="vm.generalForm.companyPhone.$error">
                                                                            <div ng-message="maxlength">Phone Number has to be less than 15 characters long</div>
                                                                        </div>
                                                                    </md-input-container>
                                                                </div>
                                                                <div class="title">
                                                                    <md-input-container class="md-block mb-0" flex>
                                                                        <label>Email</label>
                                                                        <input name="companyEmail" type="" ng-model="template.companyEmail" ng-pattern="/^.+@.+\..+$/" ng-maxlength="30">
                                                                        <div ng-messages="vm.generalForm.companyEmail.$error">
                                                                            <div ng-message="maxlength">Company Email has to be less than 30 characters long</div>
                                                                            <div ng-message="pattern">Company Email is invalid</div>
                                                                        </div>
                                                                    </md-input-container>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>

                                    <div class="group-sub-head mt-30 pos-rel">
                                        <b>Footer</b>
                                        <md-icon md-font-icon="icon-information" class="fs-14 format-footer-ico">
                                            <div id="format-footer" class="doc-format-tooltip" md-whiteframe="4dp" layout="column">
                                                <div layout="row" class="mb-10">
                                                    <div flex>
                                                        <div class="line"></div>
                                                        <div class="line"></div>
                                                        <div class="line"></div>
                                                    </div>
                                                    <div flex layout="row">
                                                        <div class="logo"></div>
                                                        <div flex>
                                                            <div class="line"></div>
                                                            <div class="line"></div>
                                                            <div class="line"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="line"></div>
                                                <div class="line"></div>
                                                <div class="line"></div>
                                                <div class="line"></div>
                                                <div class="line"></div>
                                                <div class="line"></div>
                                                <div class="line"></div>
                                                <div class="line"></div>
                                                <div layout="column" class="mt-10 highlight">
                                                    <div class="line w-10"></div>
                                                    <div class="line"></div>
                                                    <div class="line"></div>
                                                </div>
                                            </div>
                                        </md-icon>
                                    </div>
                                    <div layout="row">
                                        <md-input-container flex class="full no-bottom">
                                            <label>Greeting</label>
                                            <input name="greeting" type="text" ng-model="footerDet.greeting" ng-maxlength="140"/>
                                            <div ng-messages="vm.generalForm.greeting.$error">
                                                <div ng-message="maxlength">Greeting has to be less than 140 characters long</div>
                                            </div>
                                        </md-input-container>
                                    </div>
                                    <div layout="row">
                                        <md-input-container flex class="full top no-bottom">
                                            <label>Terms & Conditions</label>
                                            <input name="disclaimer" type="text" ng-model="footerDet.disclaimer" ng-maxlength="140"/>
                                            <div ng-messages="vm.generalForm.disclaimer.$error">
                                                <div ng-message="maxlength">Disclaimer has to be less than 140 characters long</div>
                                            </div>
                                        </md-input-container>
                                    </div>
                                </md-card-content>
                            </md-card>
                        </form>
                    </md-content>
                </md-tab>
                <md-tab label="Plans" layout="column" layout-align="start start" ng-click="vm.settingsCategoryNavigation('products')">
                    <md-content>
                        <div class="content-wrapper">
                            <div layout="row">
                                <form name="vm.planType" ng-submit="submitPlan()" flex>
                                    <md-card flex class="input-block-gen">
                                        <md-card-title>
                                            <div layout="row" layout-align="space-between center" flex>
                                                <div layout="row">
                                                    <md-icon md-font-icon="icon-map"></md-icon> <h3>Plan types</h3>
                                                </div>
                                                <md-button class="md-raised add-item-main" layout="row" layout-align="start center" ng-click="addPlanDialog()"><md-icon md-font-icon="icon-plus"></md-icon> ADD</md-button>
                                            </div>
                                        </md-card-title>
                                        <div class="list-header" layout="row">
                                            <div flex layout-align="center start">Plan type</div>
                                            <div flex="10" layout="row" layout-align="end center">Actions</div>
                                        </div>
                                        <md-card-content style="padding: 0">
                                            <div class="preloader" ng-if="!isPlanTypeLoaded">
                                                <md-progress-circular></md-progress-circular>
                                            </div>
                                            <div layout="row" layout-align="center center" class="msg-empty-list" ng-if="planTypeList.length == 0">
                                                <span><md-icon md-font-icon="icon-information-outline"></md-icon> No plan type has been added yet</span>
                                            </div>
                                            <div flex class="carded-dashboard-list">
                                                <div layout="row" class="action-row" ng-repeat="type in planTypeList" ng-click="null" layout-align="start center">
                                                    <span flex>{{type.RecordFieldData}}</span>
                                                    <span flex="10" style="max-width: 150px" layout="row" layout-align="end center">
                                                  <md-button class="md-icon-button" aria-label="Edit" ng-click="editPlanDialog(type)">
                                                    <md-icon md-font-icon="icon-pencil"></md-icon>
                                                    <md-tooltip>Edit</md-tooltip>
                                                  </md-button>
                                                  <md-button class="md-icon-button md-warn action-row-remove" aria-label="Delete" ng-click="deletePlan(type,$index)" show-gt-sm>
                                                    <md-icon md-font-icon="icon-close-circle"></md-icon>
                                                    <md-tooltip>Delete</md-tooltip>
                                                  </md-button>
                                                </span>
                                                </div>
                                            </div>
                                        </md-card-content>
                                        <!--<md-card-actions>-->
                                            <!--<div layout="row" class="plan_footer" layout-align="end center">-->
                                                <!--<md-button class="md-icon-button md-accent mr-5" ng-click="addPlanDialog()"><md-icon md-font-icon="icon-plus-circle"></md-icon><md-tooltip>Add plan</md-tooltip> </md-button>-->
                                            <!--</div>-->
                                        <!--</md-card-actions>-->
                                    </md-card>
                                </form>
                            </div>
                        </div>

                        <div class="content-wrapper">
                            <div layout="row">
                                <form name="vm.planChangeFeeForm" ng-submit="submitPlanChangeFee()" flex>
                                    <md-card flex class="input-block-gen">
                                        <md-card-title>
                                            <div layout="row" layout-align="space-between center" flex>
                                                <div layout="row" layout-align="start center">
                                                    <md-icon md-font-icon="icon-map"></md-icon> <h3>Plan change fee</h3>
                                                </div>
                                                <md-button class="md-raised add-item-main" layout="row" layout-align="start center" ng-click="planChangeView = true"><md-icon md-font-icon="icon-plus"></md-icon> ADD</md-button>
                                            </div>
                                        </md-card-title>
                                        <div layout="column" class="slider-popup animate-slide-down" md-whiteframe="4dp" ng-show="planChangeView">
                                            <div class="header-bar text-right" layout="row" layout-align="space-between center">
                                                <h3>New plan change fee</h3>
                                                <md-button class="md-icon-button" ng-click="planChangeView = false"><md-icon md-font-icon="icon-close"></md-icon> </md-button>
                                            </div>
                                            <div class="p-20">
                                                <div layout="row" flex>
                                                    <md-input-container class="md-block rel" flex="30">
                                                        <label>Plan(From)</label>
                                                        <md-select flex ng-required="true" ng-change="changePlanFee.planTo=''" ng-model="changePlanFee.planFrom">
                                                            <!--<md-option value="Services" ng-selected="true">Services</md-option>-->
                                                            <md-option ng-repeat="plan in planKeyAttributesList" ng-value="plan.code">{{plan.name}}</md-option>
                                                        </md-select>
                                                    </md-input-container>
                                                    <div flex="5"></div>
                                                    <md-input-container class="md-block rel" flex="30">
                                                        <label>Plan(To)</label>
                                                        <md-select flex ng-required="true" ng-model="changePlanFee.planTo">
                                                            <!--<md-option value="Services" ng-selected="true">Services</md-option>-->
                                                            <md-option ng-repeat="plan in planKeyAttributesList" ng-disabled="plan.code==changePlanFee.planFrom" ng-value="plan.code">{{plan.name}}</md-option>
                                                        </md-select>
                                                    </md-input-container>
                                                    <div flex="5"></div>
                                                    <md-input-container class="md-block rel" flex="30">
                                                        <label>Change Fee</label>
                                                        <input name="planFee" type="number" ng-required="true" ng-model="changePlanFee.fee" ng-maxlength="15">
                                                        <div ng-messages="vm.planChangeFeeForm.planFee.$error">
                                                            <div ng-message="maxlength">Change Fee has to be less than 15 characters long</div>
                                                        </div>
                                                    </md-input-container>
                                                </div>
                                            </div>
                                            <md-divider></md-divider>
                                            <div class="light-gray" layout="row" layout-align="end center">
                                                <md-button type="submit" md-no-ink class="md-accent md-raised" ng-disabled="planChangeFeeSubmitted">Add</md-button>
                                            </div>
                                        </div>
                                        <div class="list-header" layout="row">
                                            <div flex layout-align="center start">Plan(From)</div>
                                            <div flex layout-align="center start">Plan(To)</div>
                                            <div flex class="text-right">Change Fee</div>
                                            <span flex="20"></span>
                                            <div flex="10" layout="row" layout-align="end center">Actions</div>
                                        </div>
                                        <md-card-content style="padding: 0">
                                            <div class="preloader" ng-if="loadingPlanChangeFee">
                                                <md-progress-circular></md-progress-circular>
                                            </div>
                                            <div layout="row" layout-align="center center" class="msg-empty-list" ng-if="planChangeFeeList.length == 0">
                                                <span><md-icon md-font-icon="icon-information-outline"></md-icon> No plan change fee has been added yet</span>
                                            </div>
                                            <div flex class="carded-dashboard-list">
                                                <div layout="row" class="action-row" ng-repeat="item in planChangeFeeList" ng-click="null" layout-align="start center" ng-class="{'editable-action-row': item.editItem}">
                                                    <span ng-if="!item.editItem" flex>{{item.planFrom}}</span>
                                                    <span ng-if="item.editItem" flex="30">
                                                        <md-select flex ng-required="true" ng-change="item.planTo=''" ng-model="item.planFrom">
                                                            <!--<md-option value="Services" ng-selected="true">Services</md-option>-->
                                                            <md-option ng-repeat="plan in planKeyAttributesList" ng-value="plan.code">{{plan.name}}</md-option>
                                                        </md-select>
                                                    </span>
                                                    <div ng-if="item.editItem" flex="5"></div>
                                                    <span ng-if="!item.editItem" flex>{{item.planTo}}</span>
                                                    <span ng-if="item.editItem" flex="30">
                                                        <md-select flex ng-required="true" ng-model="item.planTo" ms-scroll>
                                                        <!--<md-option value="Services" ng-selected="true">Services</md-option>-->
                                                            <md-option ng-repeat="plan in planKeyAttributesList" ng-disabled="plan.code==item.planFrom" ng-value="plan.code">{{plan.name}}</md-option>
                                                        </md-select>
                                                    </span>
                                                    <div ng-if="item.editItem" flex="5"></div>
                                                    <span ng-if="!item.editItem" flex class="text-right">{{item.fee | isoCurrency : BaseCurrencyPlanChangeFee}}</span>
                                                    <span flex="20" ng-if="!item.editItem"></span>
                                                    <span ng-if="item.editItem" flex="30">
                                                        <md-input-container class="mb-0" flex>
                                                            <input name="planFee" type="number" class="text-right" ng-required="true" ng-model="item.fee" ng-maxlength="15">
                                                        </md-input-container>
                                                    </span>
                                                    <div ng-if="item.editItem" flex="5"></div>
                                                    <span flex="10" layout="row" layout-align="end center">
                                                        <md-button class="md-icon-button" aria-label="Edit" ng-click="editPlanChangeFee(item)" ng-if="!item.editItem">
                                                        <md-icon md-font-icon="icon-pencil"></md-icon>
                                                        <md-tooltip>Edit</md-tooltip>
                                                      </md-button>
                                                      <md-button class="md-icon-button" aria-label="Edit" ng-disabled="planChangeFeeUpdateSubmitted" ng-click="updatingPlanChangeFee(item,$index)" ng-if="item.editItem">
                                                        <md-icon md-font-icon="icon-floppy"></md-icon>
                                                        <md-tooltip>Update</md-tooltip>
                                                      </md-button>
                                                      <md-button class="md-icon-button action-row-remove" aria-label="Edit" ng-click="cancelEditPlanChangeFee(item)" ng-if="item.editItem">
                                                        <md-icon md-font-icon="icon-close"></md-icon>
                                                        <md-tooltip>Cancel</md-tooltip>
                                                      </md-button>
                                                      <md-button class="md-icon-button md-warn action-row-remove" aria-label="Delete" ng-click="deletingPlanChangeFee(item)" ng-if="!item.editItem" show-gt-sm>
                                                        <md-icon md-font-icon="icon-close-circle"></md-icon>
                                                        <md-tooltip>Delete</md-tooltip>
                                                      </md-button>
                                                    </span>
                                                </div>
                                            </div>
                                        </md-card-content>
                                    </md-card>
                                </form>
                            </div>
                        </div>
                    </md-content>
                </md-tab>
                <md-tab label="Webhooks" layout="column" layout-align="start start" ng-click="vm.settingsCategoryNavigation('webhooks')">
                    <md-content>
                        <div class="content-wrapper" layout="column" layout-fill>

                            <md-content ms-scroll>
                                <md-card flex class="input-block-gen">
                                    <md-card-title>
                                        <div layout="row" layout-align="space-between center" flex>
                                            <div layout="row"><i class="material-icons">share</i> <h3>Current webhooks</h3></div>
                                            <md-button class="md-raised add-item-main" layout="row" layout-align="start center" ng-click="addWebhookDialog(false)"><md-icon md-font-icon="icon-plus"></md-icon> ADD</md-button>
                                        </div>
                                    </md-card-title>
                                    <div class="list-header" layout="row" flex>
                                        <span flex>URL</span>
                                        <span flex="10" class="text-right">Action</span>
                                    </div>
                                    <md-card-content class="p-0">
                                        <form name="vm.webHookListView" id="webhooksListForm" ng-submit="" flex>
                                            <div class="preloader" ng-if="loadingWebhooks">
                                                <md-progress-circular></md-progress-circular>
                                            </div>
                                            <div layout="row" layout-align="center center" class="msg-empty-list" ng-if="vm.webhookList.length == 0">
                                                <span><md-icon md-font-icon="icon-information-outline"></md-icon> No webhook has added yet</span>
                                            </div>
                                            <div layout="row" class="action-row" ng-repeat="webhook in vm.webhookList" ng-click="webhookItemViewToggle(webhook)" layout-align="start center">
                                                <span flex>{{webhook.endPoint}}</span>
                                                <span flex="10" class="w-150" layout="row" layout-align="end center">
                                                <md-button class="md-icon-button" aria-label="Edit" ng-click="editWebhook(webhook)">
                                                    <md-icon md-font-icon="icon-pencil"></md-icon>
                                                    <md-tooltip>Edit</md-tooltip>
                                                </md-button>
                                                <md-button class="md-icon-button md-warn action-row-remove" aria-label="Delete" ng-click="showDeleteWebhookConfirm($event,webhook)">
                                                    <md-icon md-font-icon="icon-close-circle"></md-icon>
                                                    <md-tooltip>Delete</md-tooltip>
                                                </md-button>
                                              </span>
                                            </div>
                                        </form>
                                    </md-card-content>
                                    <!--<md-card-actions>-->
                                        <!--<div layout="row" class="plan_footer" layout-align="end center">-->
                                            <!--<md-button class="md-icon-button md-accent m-5" ng-click="addWebhookDialog()"><md-icon md-font-icon="icon-plus-circle"></md-icon><md-tooltip>Add webhook</md-tooltip> </md-button>-->
                                        <!--</div>-->
                                    <!--</md-card-actions>-->
                                </md-card>

                                <md-card flex class="input-block-gen mt-30">
                                    <md-card-title>
                                        <div layout="row" layout-align="start center">
                                            <i class="material-icons">share</i> <h3>Webhook History</h3>
                                        </div>
                                    </md-card-title>
                                    <div class="list-header" layout="row" flex>
                                        <span flex>Event description</span>
                                        <span flex>Last sent date</span>
                                        <span flex>Last sent URL</span>
                                        <span flex="10">Status</span>
                                    </div>
                                    <md-card-content class="p-0">
                                        <div class="preloader" ng-if="loadingWebhookHistory">
                                            <md-progress-circular></md-progress-circular>
                                        </div>
                                        <div layout="row" layout-align="center center" class="msg-empty-list" ng-if="vm.webhookHistoryList.length == 0">
                                            <span><md-icon md-font-icon="icon-information-outline"></md-icon> No history is available for webhook</span>
                                        </div>
                                        <div class="sub-list">
                                            <div layout="row" class="list-item" ng-repeat="history in vm.webhookHistoryList" ng-click="" layout-align="start center">
                                                <span flex class="fw-500">{{history.eventDesc}}</span>
                                                <span flex>{{history.lastSentDate}}</span>
                                                <span flex style="text-transform: lowercase">{{history.lastSentUrl}}</span>
                                                <span flex="10">{{history.status}}</span>
                                            </div>
                                        </div>
                                        <div layout="row" layout-align="center center" class="" ng-if="isMoreWebhookHistoryLoading">
                                            <md-button ng-click="loadWebhookHistoryListPaging()" class="md-primary" style="font-size: 12px;font-weight: 400"><md-icon md-font-icon="icon-magnify"></md-icon> More</md-button>
                                        </div>
                                    </md-card-content>
                                </md-card>
                            </md-content>

                        </div>
                    </md-content>
                </md-tab>
                <md-tab label="Email templates" layout="column" layout-align="start start" ng-click="vm.settingsCategoryNavigation('emailtemplate')">
                    <div class="preloader" ng-if="loadingEmailTemplates">
                        <md-progress-circular></md-progress-circular>
                    </div>
                    <md-content>
                        <h3 class="text-center">Select a template as your default invoice</h3>
                        <div class="content-block-wrapper">
                            <div layout="row">

                                <form name="vm.emailTemplateView" id="emailTemplateViewForm" ng-submit="submitEmailTemplate()" flex>
                                    <div id="unit_measuers12" class="content-block p-10">
                                        <div class="email-template" ng-repeat="emailTemplate in vm.emailTemplateList" ng-click="selectChangeTemplate(emailTemplate.url)" style="zoom: 0.4;margin:20px" ng-class="{'md-whiteframe-10dp':emailTemplate.isSelected}">
                                            <div class="selected" ng-if="emailTemplate.isSelected">
                                                <md-icon md-font-icon="icon-check-circle"></md-icon>
                                            </div>
                                            <div ng-include="'app/main/settings/templates/email-template-main.html'"></div>
                                            <div class="maximize-template animate-slide-down text-right">
                                                <md-button class="md-icon-button" ng-click="maximizeTemplate(emailTemplate.name)"><md-icon md-font-icon="icon-magnify-plus" class="text-center color-accent"></md-icon></md-button>
                                            </div>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </md-content>
                </md-tab>
                <md-tab label="Invoice" layout="column" layout-align="start start" ng-click="vm.settingsCategoryNavigation('invoice')">
                    <md-content>
                        <form name="vm.invoices" ng-submit="saveInvoice()" id="invoiceForm" novalidate>
                            <md-card flex class="input-block-gen">
                                <md-card-title>
                                    <div layout="row" layout-align="start center">
                                        <md-icon md-font-icon="icon-cog"></md-icon> <h3>General</h3>
                                    </div>
                                </md-card-title>
                                <md-card-content md-whiteframe="1dp">
                                    <div layout="row" layout-align="start center">
                                        <md-input-container class="md-block bottom" flex="30">
                                            <label>Invoice Prefix</label>
                                            <input name="invoicePrefix" type="" ng-model="invoice.invoicePrefix" ng-maxlength="4">
                                            <div ng-messages="vm.invoices.invoicePrefix.$error">
                                                <div ng-message="maxlength">Invoice Prefix must be between 1-4 characters</div>
                                            </div>
                                        </md-input-container>
                                        <div flex="5"></div>
                                        <md-input-container class="md-block bottom" flex="30">
                                            <label>Minimum Length (After Prefix)</label>
                                            <input name="invoiceMinLength" ng-pattern="/^-?[0-9][^\.]*$/" max="8" type="number" ng-model="invoice.prefixLength" min="0">
                                            <div ng-messages="vm.invoices.invoiceMinLength.$error">
                                                <div ng-message="pattern">Minimum Length is invalid</div>
                                                <div ng-message="max">Please enter a less value.</div>
                                            </div>
                                        </md-input-container>
                                    </div>
                                </md-card-content>
                            </md-card>
                            <md-card flex class="input-block-gen">
                                <md-card-title>
                                    <div layout="row" layout-align="space-between center" flex>
                                        <div layout="row"><md-icon md-font-icon="icon-calendar"></md-icon> <h3>Due date terms</h3></div>
                                        <md-button class="md-raised add-item-main" layout="row" layout-align="start center" ng-click="addDueDialog()"><md-icon md-font-icon="icon-plus"></md-icon> ADD</md-button>
                                    </div>
                                </md-card-title>
                                <div class="list-header" layout="row">
                                    <div flex="35" layout-align="center start">Term name</div>
                                    <div flex layout-align="center start">No of days</div>
                                    <div flex="5"></div>
                                    <div flex="10" class="text-right">Actions</div>
                                </div>
                                <md-card-content style="padding: 0">
                                    <div class="preloader" ng-if="!dueTermsLoaded">
                                        <md-progress-circular></md-progress-circular>
                                    </div>
                                    <div layout="row" layout-align="center center" class="msg-empty-list" ng-if="invoiceTerms.length == 0">
                                        <span><md-icon md-font-icon="icon-information-outline"></md-icon> No due term has been added yet</span>
                                    </div>
                                    <div>
                                        <div layout="row" layout-align="start center" class="action-row" ng-repeat="term in invoiceTerms" ng-click="null">
                                            <span flex="35">{{term.termName}}</span>
                                            <span flex>{{term.termDays}}</span>
                                            <span flex="15" layout="row" layout-align="end center">
                                        <md-button class="md-icon-button" aria-label="Edit" ng-click="displayTerm(term,$index)">
                                          <md-icon md-font-icon="icon-pencil"></md-icon>
                                          <md-tooltip>Edit</md-tooltip>
                                        </md-button>
                                        <md-button class="md-icon-button md-warn action-row-remove" aria-label="Delete" ng-click="deleteTerm($index)">
                                          <md-icon md-font-icon="icon-close-circle"></md-icon>
                                          <md-tooltip>Delete</md-tooltip>
                                        </md-button>
                                      </span>
                                        </div>
                                    </div>
                                </md-card-content>
                                <!--<md-card-actions>-->
                                    <!--<div layout="row" class="plan_footer" layout-align="end center">-->
                                        <!--<md-button class="md-icon-button md-accent m-5" ng-click="addDueDialog()"><md-icon md-font-icon="icon-plus-circle"></md-icon><md-tooltip>Add due term</md-tooltip> </md-button>-->
                                    <!--</div>-->
                                <!--</md-card-actions>-->
                            </md-card>
                            <md-card flex class="input-block-gen">
                                <md-card-title>
                                    <div layout="row" layout-align="start center">
                                        <md-icon md-font-icon="icon-star"></md-icon> <h3>Other</h3>
                                    </div>
                                </md-card-title>
                                <md-card-content style="padding: 0">
                                    <div class="content-block-wrapper switches-block">
                                        <div layout="row" layout-align="start center">
                                            <div class="content-block" flex="30">
                                                Enable discount
                                            </div>
                                            <div flex="5"></div>
                                            <div class="content-block" flex>
                                                <md-input-container class="md-block no-bottom" flex-gt-sm>
                                                    <md-switch ng-disabled="editOn" ng-model="invoice.enableDiscounts" ng-change="toggleSwitch(invoice.enableDiscounts,'discount')" class="md-primary" ng-true-value="true" ng-false-value="false">
                                                    </md-switch>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <md-divider></md-divider>
                                        <div layout="row" layout-align="start center">
                                            <div class="content-block" flex="30">
                                                Send Invoice via Email as an Attachment
                                            </div>
                                            <div flex="5"></div>
                                            <div class="content-block" flex>
                                                <md-input-container class="md-block no-bottom" flex-gt-sm>
                                                    <md-switch ng-disabled="editOn" ng-model="invoice.sendInvoice" ng-change="toggleSwitch(invoice.sendInvoice,'invoice')" class="md-primary" ng-true-value="true" ng-false-value="false">
                                                    </md-switch>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <md-divider></md-divider>
                                        <div layout="row" layout-align="start center">
                                            <div class="content-block" flex="30">
                                                Allow Partial Payments
                                            </div>
                                            <div flex="5">
                                                <!--Spacer -->
                                            </div>
                                            <div class="content-block" flex>
                                                <md-input-container class="md-block no-bottom" flex-gt-sm>
                                                    <md-switch ng-disabled="editOn" ng-model="invoice.allowPartialPay" ng-change="toggleSwitch(invoice.allowPartialPay,'payments')" class="md-primary" ng-true-value="true" ng-false-value="false">
                                                    </md-switch>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <md-divider></md-divider>
                                        <div layout="row" layout-align="start center">
                                            <div class="content-block" flex="30">
                                                Enable Credit Limit
                                            </div>
                                            <div flex="5">
                                                <!--Spacer -->
                                            </div>
                                            <div class="content-block" layout="row" layout-align="start center" flex>
                                                <md-input-container class="md-block no-bottom" flex="10">
                                                    <md-switch ng-disabled="editOn" ng-model="invoice.enablecreditLimit" ng-change="toggleSwitch(invoice.enablecreditLimit,'creditlimit')" class="md-primary" ng-true-value="true" ng-false-value="false">
                                                    </md-switch>
                                                </md-input-container>
                                                <div flex="5"></div>
                                                <md-input-container ng-if="invoice.enablecreditLimit" class="md-block bottom" flex="50" style="top: 20px;">
                                                    <label>Default Credit Limit</label>
                                                    <input ng-disabled="!invoice.enablecreditLimit" ng-required="invoice.enablecreditLimit" name="creditLimit" ng-pattern="" max="1000000000000000000" type="number" ng-model="invoice.creditLimit" min="0" valid-number decimal-point="general.decimalPoint" style="text-align: right">
                                                    <div ng-messages="vm.invoices.creditLimit.$error">
                                                        <div ng-message="required">Default credit limit is required</div>
                                                        <div ng-message="pattern">Default credit limit is invalid</div>
                                                        <div ng-message="max">Please enter a less value</div>
                                                    </div>
                                                </md-input-container>
                                                <md-input-container ng-if="!invoice.enablecreditLimit" class="md-block bottom" flex="50" style="top: 20px;">
                                                    <label>Default Credit Limit</label>
                                                    <input ng-disabled="!invoice.enablecreditLimit" ng-required="invoice.enablecreditLimit" name="creditLimit" ng-pattern="" max="1000000000000000000" type="number" ng-model="invoice.creditLimit" min="0" >
                                                    <div ng-messages="vm.invoices.creditLimit.$error">
                                                        <div ng-message="required">Default credit limit is required</div>
                                                        <div ng-message="pattern">Default credit limit is invalid</div>
                                                        <div ng-message="max">Please enter a less value</div>
                                                    </div>
                                                </md-input-container>
                                            </div>
                                        </div>
                                    </div>
                                </md-card-content>
                            </md-card>
                        </form>
                    </md-content>
                </md-tab>
                <md-tab label="Payments" layout="column" layout-align="start start" ng-click="vm.settingsCategoryNavigation('payment')">
                    <md-content flex fill-height layout="column">
                        <md-tabs md-selected="paymentsInnerNav" md-border-bottom flex>
                            <md-tab>
                                <md-tab-label>
                                    <md-icon md-font-icon="icon-cog"></md-icon> General
                                </md-tab-label>
                                <md-tab-body>
                                    <md-content flex fill-height>
                                        <form id="settingsPaymentForm" name="vm.payments" ng-submit="savePayment()">
                                            <div class="fill-wrapper" layout="column" layout-fill>
                                                <md-card class="input-block-gen">
                                                    <!--<md-card-title>-->
                                                        <!--<div layout="row" layout-align="start center">-->
                                                            <!--<md-icon md-font-icon="icon-cog"></md-icon> <h3>General</h3>-->
                                                        <!--</div>-->
                                                    <!--</md-card-title>-->
                                                    <md-card-content md-whiteframe="1dp">
                                                        <div layout="row" layout-align="start center">
                                                            <md-input-container class="md-block bottom" flex="30">
                                                                <label>Payment Prefix</label>
                                                                <input name="paymentPrefix" type="" ng-model="payment.paymentPrefix" ng-maxlength="4">
                                                                <div ng-messages="vm.payments.paymentPrefix.$error">
                                                                    <div ng-message="maxlength">Payment Prefix has to be less than 4 characters long</div>
                                                                </div>
                                                            </md-input-container>
                                                            <div flex="5"></div>
                                                            <md-input-container class="md-block bottom" flex="30">
                                                                <label>Minimum Length (After Prefix)</label>
                                                                <input name="paymentMinLength" ng-pattern="/^-?[0-9][^\.]*$/" min="0" max="8" type="number" ng-model="payment.prefixLength">
                                                                <div ng-messages="vm.payments.paymentMinLength.$error">
                                                                    <div ng-message="pattern">Minimum Length is invalid</div>
                                                                    <div ng-message="max">Please enter a less value.</div>
                                                                </div>
                                                            </md-input-container>
                                                        </div>
                                                    </md-card-content>
                                                </md-card>
                                                <md-card flex class="input-block-gen">
                                                    <md-card-title>
                                                        <div layout="row" layout-align="space-between center" flex>
                                                            <div layout="row"><md-icon md-font-icon="icon-calendar-clock"></md-icon> <h3>Reminders</h3></div>
                                                            <md-button class="md-raised add-item-main" layout="row" layout-align="start center" ng-click="addReminder()"><md-icon md-font-icon="icon-plus"></md-icon> ADD</md-button>
                                                        </div>
                                                    </md-card-title>
                                                    <div class="list-header" layout="row">
                                                        <div flex layout-align="center start">Reminder name</div>
                                                        <div flex layout-align="center start">Reminder</div>
                                                        <div flex="20" class="text-right">Actions</div>
                                                    </div>
                                                    <md-card-content class="p-0">
                                                        <div>
                                                            <div class="preloader" ng-if="!remindersInPaymentLoaded">
                                                                <md-progress-circular></md-progress-circular>
                                                            </div>
                                                            <div layout="row" layout-align="start center" class="action-row" ng-repeat="invoiceReminder in invoiceReminders">
                                                                <div flex layout="row" layout-align="start center">
                                                                    <div flex layout="row" layout-align="start center">
                                                                        <span>Reminder - </span> {{invoiceReminder.No}}
                                                                        <span class="pill disabled" layout="row" layout-align="center center" ng-show="invoiceReminder.isDisabled">Disabled</span>
                                                                        <span class="pill enabled" layout="row" layout-align="center center" ng-hide="invoiceReminder.isDisabled">Enabled</span>
                                                                    </div>
                                                                    <!--<md-button class="md-icon-button" ng-click="showReminderInfo($event, $index)"><md-icon md-font-icon="icon-information" style="color: rgba(0, 0, 0, 0.21);"></md-icon></md-button>-->
                                                                    <div layout="row" layout-align="start center" flex>
                                                                        <div ng-if="invoiceReminder.isDisabled">
                                                                            <i class="op-5">This reminder is off</i>
                                                                        </div>
                                                                        <div ng-if="!invoiceReminder.isDisabled">
                                                                            <span ng-hide="invoiceReminder.ReminderType == 'OnDueDate'">
                                                                            <span class="md-accent">{{invoiceReminder.ReminderDays}}</span>&nbsp;day<span ng-if="invoiceReminder.ReminderDays>1">s</span>&nbsp;
                                                                            </span>
                                                                            <span ng-if="invoiceReminder.ReminderType == 'Before'"> <b>before</b> the due date.</span>
                                                                            <span ng-if="invoiceReminder.ReminderType == 'OnDueDate'"> <b ng-class="{'caps':invoiceReminder.ReminderType == 'OnDueDate'}">on</b> the due date.</span>
                                                                            <span ng-if="invoiceReminder.ReminderType == 'After'"> <b>after</b> the due date.</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div flex="20" layout-align="end center" layout="row">
                                                                    <md-button ng-if="invoiceReminder.isDisabled" ng-click="showReminderDialog($event,$index);" class="md-accent" style="margin-right: 5px">Turn on</md-button>
                                                                    <md-button ng-if="!invoiceReminder.isDisabled" ng-click="turnOffReminder($index);" class="md-warn">Turn off</md-button>
                                                                    <md-button ng-click="removeReminder($index)" class="md-icon-button md-warn action-row-remove"><md-icon md-font-icon="icon-close-circle"></md-icon> <md-tooltip>Delete</md-tooltip></md-button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </md-card-content>
                                                    <!--<md-card-actions>-->
                                                    <!--<div layout="row" class="plan_footer" layout-align="end center">-->
                                                    <!--<md-button class="md-icon-button md-accent m-5" ng-click="addReminder()"><md-icon md-font-icon="icon-plus-circle"></md-icon><md-tooltip>Add reminder</md-tooltip> </md-button>-->
                                                    <!--</div>-->
                                                    <!--</md-card-actions>-->
                                                </md-card>
                                                <div flex></div>
                                            </div>
                                        </form>
                                    </md-content>
                                </md-tab-body>
                            </md-tab>
                            <md-tab>
                                <md-tab-label>
                                    <md-icon md-font-icon="icon-credit-card-multiple"></md-icon> Payment retry configuration
                                </md-tab-label>
                                <md-tab-body>
                                    <md-content flex fill-height>
                                        <form id="paymentRetryProcessForm" name="vm.paymentRetryProcessForm" ng-submit="submitPaymentRetryProcess()">
                                            <div class="fill-wrapper" layout="column" layout-fill>
                                                <md-card class="input-block-gen">
                                                    <!--<md-card-title>-->
                                                        <!--<div layout="row" layout-align="start center">-->
                                                            <!--<md-icon md-font-icon="icon-credit-card-multiple"></md-icon> <h3>Payment retry configuration</h3>-->
                                                        <!--</div>-->
                                                    <!--</md-card-title>-->
                                                    <div>
                                                        <div class="ml-35 mt-10" layout="row" layout-align="start center">
                                                            <i class="material-icons start-process">repeat</i>
                                                            <md-input-container class="md-block mb-0" flex="20">
                                                                <label>Process</label>
                                                                <input name="payment" type="text" ng-disabled="true" ng-init="retryProcess.processName='Payment'" ng-model="retryProcess.processName" ng-maxlength="30">
                                                                <div ng-messages="vm.paymentRetryProcessForm.payment.$error">
                                                                    <div ng-message="maxlength">Process has to be less than 30 characters long</div>
                                                                </div>
                                                            </md-input-container>
                                                        </div>

                                                        <div class="process-block">
                                                            <div layout="row" flex>
                                                                <div layout="row" layout-align="start center" class="step-circle" flex="20">
                                                                    <span class="circle">1st</span>
                                                                    <span class="label">Failed attempt</span>
                                                                </div>
                                                                <!--<div flex="10" layout="row" layout-align="center center">-->
                                                                    <!--&lt;!&ndash;<div class="bb flex"></div>&ndash;&gt;-->
                                                                <!--</div>-->
                                                                <div class="step-body" layout="row" layout-align="start center">
                                                                    <div layout="row" layout-align="start center">
                                                                        <span class="mr-10">Retry after</span>
                                                                        <md-input-container>
                                                                            <md-select flex ng-required="true" ng-model="retryProcess.daysAfterAttempt1st">
                                                                                <!--<md-option value="Services" ng-selected="true">Services</md-option>-->
                                                                                <md-option ng-value="1">1</md-option>
                                                                                <md-option ng-value="2">2</md-option>
                                                                                <md-option ng-value="3">3</md-option>
                                                                                <md-option ng-value="4">4</md-option>
                                                                                <md-option ng-value="5">5</md-option>
                                                                                <md-option ng-value="6">6</md-option>
                                                                                <md-option ng-value="7">7</md-option>
                                                                                <md-option ng-value="8">8</md-option>
                                                                                <md-option ng-value="9">9</md-option>
                                                                                <!--<md-option ng-value="Other">Other..</md-option>-->
                                                                            </md-select>
                                                                        </md-input-container>
                                                                        <span class="ml-10"> day<span ng-if="retryProcess.daysAfterAttempt1st>1">s</span> from the previous attempt</span>
                                                                    </div>
                                                                    <div layout="row" layout-align="start center">
                                                                        <span class="ml-20 fs-20">+</span>
                                                                        <md-checkbox ng-model="retryProcess.emailNotification1st" aria-label="Event" class="ml-20 mb-0 md-primary">Notify with an email</md-checkbox>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="process-block">
                                                            <div layout="row" flex>
                                                                <div layout="row" layout-align="start center" class="step-circle" flex="20">
                                                                    <span class="circle">2nd</span>
                                                                    <span class="label">Failed attempt</span>
                                                                </div>
                                                                <!--<div flex="10" layout="row" layout-align="center center">-->
                                                                    <!--&lt;!&ndash;<div class="bb flex"></div>&ndash;&gt;-->
                                                                <!--</div>-->
                                                                <div class="step-body" layout="row" layout-align="start center">
                                                                    <div layout="row" layout-align="start center">
                                                                        <span class="mr-10">Retry after</span>
                                                                        <md-input-container>
                                                                            <md-select flex ng-required="true" ng-model="retryProcess.daysAfterAttempt2nd">
                                                                                <!--<md-option value="Services" ng-selected="true">Services</md-option>-->
                                                                                <md-option ng-value="1">1</md-option>
                                                                                <md-option ng-value="2">2</md-option>
                                                                                <md-option ng-value="3">3</md-option>
                                                                                <md-option ng-value="4">4</md-option>
                                                                                <md-option ng-value="5">5</md-option>
                                                                                <md-option ng-value="6">6</md-option>
                                                                                <md-option ng-value="7">7</md-option>
                                                                                <md-option ng-value="8">8</md-option>
                                                                                <md-option ng-value="9">9</md-option>
                                                                                <!--<md-option ng-value="Other">Other..</md-option>-->
                                                                            </md-select>
                                                                        </md-input-container>
                                                                        <span class="ml-10">day<span ng-if="retryProcess.daysAfterAttempt2nd>1">s</span> from the previous attempt</span>
                                                                    </div>
                                                                    <div layout="row" layout-align="start center">
                                                                        <span class="ml-20 fs-20">+</span>
                                                                        <md-checkbox ng-model="retryProcess.emailNotification2nd" aria-label="Event" class="ml-20 mb-0 md-primary">Notify with an email</md-checkbox>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="process-block">
                                                            <div layout="row" flex>
                                                                <div layout="row" layout-align="start center" class="step-circle" flex="20">
                                                                    <span class="circle">3rd</span>
                                                                    <span class="label">Failed attempt</span>
                                                                </div>
                                                                <!--<div flex="10" layout="row" layout-align="center center">-->
                                                                    <!--&lt;!&ndash;<div class="bb flex"></div>&ndash;&gt;-->
                                                                <!--</div>-->
                                                                <div class="step-body" layout="row" layout-align="start center">
                                                                    <div layout="row" layout-align="start center">
                                                                        <span class="mr-10">Retry after</span>
                                                                        <md-input-container>
                                                                            <md-select flex ng-required="true" ng-model="retryProcess.daysAfterAttempt3rd">
                                                                                <!--<md-option value="Services" ng-selected="true">Services</md-option>-->
                                                                                <md-option ng-value="1">1</md-option>
                                                                                <md-option ng-value="2">2</md-option>
                                                                                <md-option ng-value="3">3</md-option>
                                                                                <md-option ng-value="4">4</md-option>
                                                                                <md-option ng-value="5">5</md-option>
                                                                                <md-option ng-value="6">6</md-option>
                                                                                <md-option ng-value="7">7</md-option>
                                                                                <md-option ng-value="8">8</md-option>
                                                                                <md-option ng-value="9">9</md-option>
                                                                                <!--<md-option ng-value="Other">Other..</md-option>-->
                                                                            </md-select>
                                                                        </md-input-container>
                                                                        <span class="ml-10">day<span ng-if="retryProcess.daysAfterAttempt3rd>1">s</span> from the previous attempt</span>
                                                                    </div>
                                                                    <div layout="row" layout-align="start center">
                                                                        <span class="ml-20 fs-20">+</span>
                                                                        <md-checkbox ng-model="retryProcess.emailNotification3rd" aria-label="Event" class="ml-20 mb-0 md-primary">Notify with an email</md-checkbox>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="process-block pb-0 pt-5">
                                                            <div layout="row" flex>
                                                                <div layout="row" layout-align="start center" class="step-circle mb-0" flex="20">
                                                                    <span class="circle end text-center">
                                                                        <!--<i class="material-icons">report</i>-->
                                                                        END
                                                                    </span>
                                                                    <span class="label">Process by</span>
                                                                </div>
                                                                <!--<div flex="10" layout="row" layout-align="center center">-->
                                                                    <!--&lt;!&ndash;<div class="bb flex"></div>&ndash;&gt;-->
                                                                <!--</div>-->
                                                                <div class="step-body mbm-10" layout="row" layout-align="start center">
                                                                    <div layout="row" layout-align="start center">
                                                                        <md-input-container>
                                                                            <md-select flex ng-required="true" ng-model="retryProcess.daysAfterAttemptFinally">
                                                                                <!--<md-option value="Services" ng-selected="true">Services</md-option>-->
                                                                                <md-option ng-value="'Deactivate Profile'">Deactivate Profile</md-option>
                                                                            </md-select>
                                                                        </md-input-container>
                                                                    </div>
                                                                    <div layout="row" layout-align="start center">
                                                                        <span class="ml-20 fs-20">+</span>
                                                                        <md-checkbox ng-model="retryProcess.emailNotificationFinally" aria-label="Event" class="ml-20 mb-0 md-primary">Notify with an email</md-checkbox>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!--<div layout="row" layout-align="start center">-->
                                                            <!--<div flex="30">-->
                                                                <!--<label>Process :</label>-->
                                                            <!--</div>-->
                                                            <!--<div flex>-->
                                                                <!--<md-input-container class="md-block bottom" flex="20">-->
                                                                    <!--<label></label>-->
                                                                    <!--<input name="payment" type="text" ng-disabled="true" ng-init="retryProcess.processName='Payment'" ng-model="retryProcess.processName" ng-maxlength="30">-->
                                                                    <!--<div ng-messages="vm.paymentRetryProcessForm.payment.$error">-->
                                                                        <!--<div ng-message="maxlength">Process has to be less than 30 characters long</div>-->
                                                                    <!--</div>-->
                                                                <!--</md-input-container>-->
                                                            <!--</div>-->
                                                        <!--</div>-->
                                                        <!--<div layout="row" layout-align="start center">-->
                                                            <!--<div flex="30">-->
                                                                <!--<label>1st Failed Attempt :</label>-->
                                                            <!--</div>-->
                                                            <!--<div layout="row" flex>-->
                                                                <!--<label>  Retry</label>-->
                                                                <!--<md-input-container class="md-block bottom" style="margin: 0" flex="20">-->
                                                                    <!--<label></label>-->
                                                                    <!--<md-select flex ng-required="true" ng-model="retryProcess.daysAfterAttempt1st">-->
                                                                        <!--&lt;!&ndash;<md-option value="Services" ng-selected="true">Services</md-option>&ndash;&gt;-->
                                                                        <!--<md-option ng-value="1">1</md-option>-->
                                                                        <!--<md-option ng-value="2">2</md-option>-->
                                                                        <!--<md-option ng-value="3">3</md-option>-->
                                                                        <!--<md-option ng-value="4">4</md-option>-->
                                                                        <!--<md-option ng-value="5">5</md-option>-->
                                                                        <!--<md-option ng-value="6">6</md-option>-->
                                                                        <!--<md-option ng-value="7">7</md-option>-->
                                                                        <!--<md-option ng-value="8">8</md-option>-->
                                                                        <!--<md-option ng-value="9">9</md-option>-->
                                                                        <!--&lt;!&ndash;<md-option ng-value="Other">Other..</md-option>&ndash;&gt;-->
                                                                    <!--</md-select>-->
                                                                    <!--&lt;!&ndash;<input name="retryAttemptOther1st" type="number" ng-if="retryProcess.daysAfterAttempt1st=='Other'" ng-model="retryProcess.retryAttemptOther1st" ng-maxlength="4">&ndash;&gt;-->
                                                                    <!--&lt;!&ndash;<div ng-messages="vm.paymentRetryProcessForm.retryAttemptOther1st.$error">&ndash;&gt;-->
                                                                    <!--&lt;!&ndash;<div ng-message="maxlength">Digits has to be less than 4 characters long</div>&ndash;&gt;-->
                                                                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                                                                <!--</md-input-container>-->
                                                                <!--<label> Days after the previous Attempt</label>-->
                                                            <!--</div>-->
                                                            <!--<div flex>-->
                                                                <!--<md-checkbox ng-model="retryProcess.emailNotification1st" aria-label="Event" class="md-primary">Email Notification</md-checkbox>-->
                                                            <!--</div>-->
                                                        <!--</div>-->
                                                        <!--<div layout="row" layout-align="start center">-->
                                                            <!--<div flex="30">-->
                                                                <!--<label>2nd Failed Attempt :</label>-->
                                                            <!--</div>-->
                                                            <!--<div layout="row" flex>-->
                                                                <!--<label>  Retry</label>-->
                                                                <!--<md-input-container class="md-block bottom" style="margin: 0" flex="20">-->
                                                                    <!--<label></label>-->
                                                                    <!--<md-select flex ng-required="true" ng-model="retryProcess.daysAfterAttempt2nd">-->
                                                                        <!--&lt;!&ndash;<md-option value="Services" ng-selected="true">Services</md-option>&ndash;&gt;-->
                                                                        <!--<md-option ng-value="1">1</md-option>-->
                                                                        <!--<md-option ng-value="2">2</md-option>-->
                                                                        <!--<md-option ng-value="3">3</md-option>-->
                                                                        <!--<md-option ng-value="4">4</md-option>-->
                                                                        <!--<md-option ng-value="5">5</md-option>-->
                                                                        <!--<md-option ng-value="6">6</md-option>-->
                                                                        <!--<md-option ng-value="7">7</md-option>-->
                                                                        <!--<md-option ng-value="8">8</md-option>-->
                                                                        <!--<md-option ng-value="9">9</md-option>-->
                                                                        <!--&lt;!&ndash;<md-option ng-value="Other">Other..</md-option>&ndash;&gt;-->
                                                                    <!--</md-select>-->
                                                                    <!--&lt;!&ndash;<input name="retryAttemptOther2nd" type="number" ng-if="retryProcess.daysAfterAttempt2nd=='Other'" ng-model="retryProcess.retryAttemptOther2nd" ng-maxlength="4">&ndash;&gt;-->
                                                                    <!--&lt;!&ndash;<div ng-messages="vm.paymentRetryProcessForm.retryAttemptOther2nd.$error">&ndash;&gt;-->
                                                                    <!--&lt;!&ndash;<div ng-message="maxlength">Digits has to be less than 4 characters long</div>&ndash;&gt;-->
                                                                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                                                                <!--</md-input-container>-->
                                                                <!--<label> Days after the previous Attempt</label>-->
                                                            <!--</div>-->
                                                            <!--<div flex>-->
                                                                <!--<md-checkbox ng-model="retryProcess.emailNotification2nd" aria-label="Event" class="md-primary">Email Notification</md-checkbox>-->
                                                            <!--</div>-->
                                                        <!--</div>-->
                                                        <!--<div layout="row" layout-align="start center">-->
                                                            <!--<div flex="30">-->
                                                                <!--<label>3rd Failed Attempt :</label>-->
                                                            <!--</div>-->
                                                            <!--<div layout="row" flex>-->
                                                                <!--<label>  Retry</label>-->
                                                                <!--<md-input-container class="md-block bottom" style="margin: 0" flex="20">-->
                                                                    <!--<label></label>-->
                                                                    <!--<md-select flex ng-required="true" ng-model="retryProcess.daysAfterAttempt3rd">-->
                                                                        <!--&lt;!&ndash;<md-option value="Services" ng-selected="true">Services</md-option>&ndash;&gt;-->
                                                                        <!--<md-option ng-value="1">1</md-option>-->
                                                                        <!--<md-option ng-value="2">2</md-option>-->
                                                                        <!--<md-option ng-value="3">3</md-option>-->
                                                                        <!--<md-option ng-value="4">4</md-option>-->
                                                                        <!--<md-option ng-value="5">5</md-option>-->
                                                                        <!--<md-option ng-value="6">6</md-option>-->
                                                                        <!--<md-option ng-value="7">7</md-option>-->
                                                                        <!--<md-option ng-value="8">8</md-option>-->
                                                                        <!--<md-option ng-value="9">9</md-option>-->
                                                                        <!--&lt;!&ndash;<md-option ng-value="Other">Other..</md-option>&ndash;&gt;-->
                                                                    <!--</md-select>-->
                                                                    <!--&lt;!&ndash;<input name="retryAttemptOther3rd" type="number" ng-if="retryProcess.daysAfterAttempt3rd=='Other'" ng-model="retryProcess.retryAttemptOther3rd" ng-maxlength="4">&ndash;&gt;-->
                                                                    <!--&lt;!&ndash;<div ng-messages="vm.paymentRetryProcessForm.retryAttemptOther3rd.$error">&ndash;&gt;-->
                                                                    <!--&lt;!&ndash;<div ng-message="maxlength">Digits has to be less than 4 characters long</div>&ndash;&gt;-->
                                                                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                                                                <!--</md-input-container>-->
                                                                <!--<label> Days after the previous Attempt</label>-->
                                                            <!--</div>-->
                                                            <!--<div flex>-->
                                                                <!--<md-checkbox ng-model="retryProcess.emailNotification3rd" aria-label="Event" class="md-primary">Email Notification</md-checkbox>-->
                                                            <!--</div>-->
                                                        <!--</div>-->
                                                        <!--<div layout="row" layout-align="start center">-->
                                                            <!--<div flex="30">-->
                                                                <!--<label>Then Finally :</label>-->
                                                            <!--</div>-->
                                                            <!--<div layout="row" flex>-->
                                                                <!--<md-input-container class="md-block bottom" flex="50">-->
                                                                    <!--<label></label>-->
                                                                    <!--<md-select flex ng-required="true" ng-model="retryProcess.daysAfterAttemptFinally">-->
                                                                        <!--&lt;!&ndash;<md-option value="Services" ng-selected="true">Services</md-option>&ndash;&gt;-->
                                                                        <!--<md-option ng-value="'Deactivate Profile'">Deactivate Profile</md-option>-->
                                                                    <!--</md-select>-->
                                                                <!--</md-input-container>-->
                                                            <!--</div>-->
                                                            <!--<div flex>-->
                                                                <!--<md-checkbox ng-model="retryProcess.emailNotificationFinally" aria-label="Event" class="md-primary">Email Notification</md-checkbox>-->
                                                            <!--</div>-->
                                                        <!--</div>-->
                                                    </div>
                                                </md-card>
                                            </div>
                                        </form>
                                    </md-content>
                                </md-tab-body>
                            </md-tab>
                        </md-tabs>
                        <div ng-if="paymentsInnerNav == 0" ng-init="submitted=false" layout="row" layout-align="space-between center" class="md-whiteframe-8dp bottom-fixed-bar fixed">
                            <div layout="row"></div>

                            <div layout="row" class="layout-row">
                                <md-progress-circular class="gen-save-indicator" ng-if="vm.paymentSubmit"></md-progress-circular>
                                <md-button ng-click="clearPaymentFields();">Reset</md-button>
                                <md-button ng-disabled="vm.paymentSubmit" type="submit" form="settingsPaymentForm" class="md-raised md-accent">Save</md-button>
                            </div>
                        </div>
                        <div ng-if="paymentsInnerNav==1" ng-init="submitted=false" layout="row" layout-align="space-between center" class="md-whiteframe-8dp bottom-fixed-bar">
                            <div layout="row"></div>

                            <div layout="row" class="layout-row">
                                <md-progress-circular class="gen-save-indicator" ng-if="paymentRetrySubmitted"></md-progress-circular>
                                <md-button ng-click="clearPaymentFields();">Reset</md-button>
                                <md-button ng-disabled="paymentRetrySubmitted" form="paymentRetryProcessForm" type="submit" class="md-raised md-accent">Save</md-button>
                            </div>
                        </div>
                    </md-content>
                </md-tab>
                <md-tab label="Tax" label="Payments" layout="column" layout-align="start start" ng-click="vm.settingsCategoryNavigation('individual-tax')">
                    <md-content>
                        <md-card class="input-block-gen">
                                <md-card-title>
                                    <div layout="row" layout-align="space-between center" flex>
                                        <div layout="row"><md-icon md-font-icon="icon-percent"></md-icon> <h3>Individual tax</h3></div>
                                        <md-button class="md-raised add-item-main" layout="row" layout-align="start center" ng-click="taxIndAddDialog($event)"><md-icon md-font-icon="icon-plus"></md-icon> ADD</md-button>
                                    </div>
                                </md-card-title>
                                <div class="list-header" layout="row">
                                    <div flex layout-align="center start">Tax code</div>
                                    <div flex layout-align="center start">Tax type</div>
                                    <div flex="5"></div>
                                    <div flex="10" class="text-right">Actions</div>
                                </div>
                                <md-card-content class="p-0">
                                    <div class="preloader" ng-if="!isIndTaxLoaded">
                                        <md-progress-circular></md-progress-circular>
                                    </div>
                                    <div layout="row" layout-align="center center" class="msg-empty-list" ng-if="fixedRates.length == 0">
                                        <span><md-icon md-font-icon="icon-information-outline"></md-icon> No tax has added yet</span>
                                    </div>
                                    <div>
                                        <div class="action-row" layout="row" layout-align="start center" ng-repeat="fixedRate in fixedRates">
                                            <span flex>{{fixedRate.taxcode}}</span>
                                            <span flex>{{fixedRate.taxtype}}</span>
                                            <span flex="10" class="w-150" layout="row" layout-align="end center">
                                                <md-button class="md-icon-button" aria-label="Edit" ng-click="taxIndEditDialog($event,fixedRate,$index)">
                                                    <md-icon md-font-icon="icon-pencil"></md-icon>
                                                    <md-tooltip>Edit</md-tooltip>
                                                  </md-button>
                                                <md-button class="md-icon-button md-warn action-row-remove" aria-label="Delete" ng-click="deleteTax(fixedRate,$index)">
                                                    <md-icon md-font-icon="icon-close-circle"></md-icon>
                                                    <md-tooltip>Delete</md-tooltip>
                                                </md-button>
                                            </span>
                                        </div>
                                    </div>
                                </md-card-content>
                                <!--<md-card-actions>-->
                                    <!--<div layout="row" class="plan_footer" layout-align="end center">-->
                                        <!--<md-button class="md-icon-button md-accent m-5" ng-click="taxIndAddDialog($event)"><md-icon md-font-icon="icon-plus-circle"></md-icon><md-tooltip>Add tax</md-tooltip> </md-button>-->
                                    <!--</div>-->
                                <!--</md-card-actions>-->
                            </md-card>
                        <md-card class="input-block-gen">
                            <md-card-title>
                                <div layout="row" layout-align="space-between center" flex>
                                    <div layout="row"><md-icon md-font-icon="icon-percent"></md-icon> <h3>Group tax</h3></div>
                                    <md-button class="md-raised add-item-main" layout="row" layout-align="start center" ng-click="taxGroupDialogInit($event)"><md-icon md-font-icon="icon-plus"></md-icon> ADD</md-button>
                                </div>
                            </md-card-title>
                            <div class="list-header" layout="row" flex>
                                <span flex>Tax Group</span>
                                <span flex="10" class="text-right">Action</span>
                            </div>
                            <md-card-content class="p-0">
                                <div class="preloader" ng-if="!isGrpTaxLoaded">
                                    <md-progress-circular></md-progress-circular>
                                </div>
                                <div layout="row" layout-align="center center" class="msg-empty-list" ng-if="taxGroupList.length == 0">
                                    <span><md-icon md-font-icon="icon-information-outline"></md-icon> No tax group has added yet</span>
                                </div>
                                <div>
                                    <div class="action-row" layout="row" layout-align="start center" ng-repeat="taxgrp in taxGroupList">
                                        <span flex>{{taxgrp.taxgroupcode}}</span>
                                        <span flex="10" class="w-150" layout="row" layout-align="end center">
                                            <md-button class="md-icon-button" aria-label="Edit" ng-click="taxGroupEditDialog($event,taxgrp,$index,'')">
                                                <md-icon md-font-icon="icon-pencil"></md-icon>
                                                <md-tooltip>Edit</md-tooltip>
                                            </md-button>
                                            <md-button class="md-icon-button md-warn action-row-remove" aria-label="Delete" ng-click="deleteTaxGrp(taxgrp,$index)">
                                                <md-icon md-font-icon="icon-close-circle"></md-icon>
                                                <md-tooltip>Delete</md-tooltip>
                                            </md-button>
                                        </span>
                                    </div>
                                </div>
                            </md-card-content>
                            <!--<md-card-actions>-->
                                <!--<div layout="row" class="plan_footer" layout-align="end center">-->
                                    <!--<md-button class="md-icon-button md-accent m-5" ng-click="taxGroupDialogInit($event)"><md-icon md-font-icon="icon-plus-circle"></md-icon><md-tooltip>Add tax</md-tooltip> </md-button>-->
                                <!--</div>-->
                            <!--</md-card-actions>-->
                        </md-card>
                    </md-content>
                </md-tab>
                <md-tab label="Payment gateways" label="Payments" layout="column" layout-align="start start">
                    <md-content>

                      <!--start online payments-->
                          <md-card flex="30" class="payment-card" ng-repeat="gateway in currentGateways">
                            <div layout="row" layout-align="center center">
                              <md-input-container style="margin: 0;">
                                <!--<div class="online_stripe" ng-class="{'online_disabled': gateway.isConnected}"></div>-->
                                <div>{{gateway.paymentGateway}}</div>
                              </md-input-container>

                              <div flex ng-if="defaultGateway != gateway.paymentGateway">
                                <md-button ng-click="makeDefault(gateway.paymentGateway)">
                                  <md-icon md-font-icon="icon-login" md-menu-align-target></md-icon>
                                </md-button>
                              </div>
                              <div flex ng-if="defaultGateway === gateway.paymentGateway ">Default</div>

                              <md-input-container style="margin: 0;" ng-if="gateway.paymentGateway != 'testGateway'">
                                <md-menu>
                                  <md-button aria-label="Open phone interactions menu" class="md-icon-button" ng-click="vm.openRegistrationMenu($mdOpenMenu, $event)">
                                    <md-icon md-font-icon="icon-dots-vertical"></md-icon>

                                  </md-button>
                                  <md-menu-content width="4" ng-disabled="isRegButtonsShow">
                                    <md-menu-item>
                                      <md-button ng-disabled="gateway.isConnected" ng-click="proceedWithGateway(gateway.paymentGateway)">
                                        <md-icon md-font-icon="icon-login" md-menu-align-target></md-icon>
                                        Register
                                      </md-button>
                                    </md-menu-item>
                                    <md-menu-item>
                                      <md-button ng-disabled="!gateway.isConnected" ng-click="disconnectWithGateway(gateway.paymentGateway,gateway.key[0])">
                                        <md-icon md-font-icon="icon-logout"></md-icon>
                                        Leave
                                      </md-button>
                                    </md-menu-item>
                                  </md-menu-content>
                                </md-menu>
                              </md-input-container>

                              <md-input-container style="margin: 0;" ng-if="gateway.paymentGateway === 'testGateway'">
                                <md-menu>
                                  <md-button aria-label="Open phone interactions menu" class="md-icon-button" ng-click="vm.openRegistrationMenu($mdOpenMenu, $event)">
                                    <md-icon md-font-icon="icon-dots-vertical"></md-icon>
                                  </md-button>
                                  <md-menu-content width="4" ng-disabled="isRegButtonsShow">
                                    <md-menu-item>
                                      <md-button ng-disabled="isRegisteredWithtestGateway" ng-click="viewTestGateway($event)">
                                        <md-icon md-font-icon="icon-login" md-menu-align-target></md-icon>
                                        View
                                      </md-button>
                                    </md-menu-item>

                                  </md-menu-content>
                                </md-menu>
                              </md-input-container>

                            </div>
                          </md-card>
                      <!--end payment gateways-->

                    </md-content>
                </md-tab>
            </md-tabs>
            <div ng-if="mainNavSelected == 0" ng-init="submitted=false" layout="row" layout-align="space-between center" class="md-whiteframe-8dp bottom-fixed-bar">
                <div layout="row"></div>

                <div layout="row" class="layout-row">
                    <md-progress-circular class="gen-save-indicator" ng-if="generalSubmit"></md-progress-circular>
                    <md-button ng-click="clearFields();">Reset</md-button>
                    <md-button ng-disabled="generalSubmit" type="submit" class="md-raised md-accent" form="generalForm">Save</md-button>
                </div>
            </div>
            <div ng-if="mainNavSelected == 3" layout="row" class="bottom-fixed-bar" md-whiteframe="8dp" layout-align="end center">
                <md-progress-circular class="gen-save-indicator" ng-if="vm.emailTemplateSubmitted"></md-progress-circular>
                <md-button ng-disabled="vm.emailTemplateSubmitted" type="submit" class="md-raised md-accent" form="emailTemplateViewForm">set Template</md-button>
            </div>
            <div ng-if="mainNavSelected == 4" ng-init="submitted=false" layout="row" layout-align="space-between center" class="md-whiteframe-8dp bottom-fixed-bar">
                <div layout="row"></div>

                <div layout="row" class="layout-row">
                    <md-progress-circular class="gen-save-indicator" ng-if="vm.invoiceSubmit"></md-progress-circular>
                    <md-button ng-click="clearInvoiceFields();">Reset</md-button>
                    <md-button ng-disabled="vm.invoiceSubmit" type="submit" class="md-raised md-accent" form="invoiceForm">Save</md-button>
                </div>
            </div>

        </div>

    </div>
    <!-- / CONTENT CARD -->

</div>
<!-- / CENTER -->
